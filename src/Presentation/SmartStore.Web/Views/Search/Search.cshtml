@using SmartStore.Web.Models.Search;
@using SmartStore.Web.Framework.UI;

@model SearchResultModel
@{
	Layout = "~/Views/Shared/_ColumnsTwo.cshtml";

	if (Model.Term.HasValue())
	{
		Html.AddTitleParts(T("Search.PageTitle", "\"" + Model.Term + "\""));
	}
	else
	{
		Html.AddTitleParts(T("Search.Title"));
	}

	int firstItemIndex = 0;
	int lastItemIndex = 0;
	if (Model.TotalProductsCount > 0)
	{
		firstItemIndex = Model.SearchResult.Hits.FirstItemIndex;
		lastItemIndex = Model.SearchResult.Hits.LastItemIndex;
	}
}

<div class="page search-page">
	@if (Model.Term.HasValue())
	{
		<div class="page-title">
			<h1 class="h3">@T("Search.PageTitle", "<small class='text-danger'>" + Model.Term + "</small>")</h1>
			@if (Model.TotalProductsCount > 0)
			{
				<h4 class="text-muted h5">@T("Search.PagingInfo", "{0}-{1}".FormatInvariant(firstItemIndex.ToString("N0"), lastItemIndex.ToString("N0")), Model.TotalProductsCount.ToString("N0"))</h4>
			}
		</div>
	}

    <div class="page-body">
		@if (Model.Error.HasValue())
		{
			<div class="alert alert-danger">
				@Model.Error
			</div>
		}
		else if (Model.TotalProductsCount == 0)
		{
			<div class="alert alert-warning">
				@T("Search.NoResultsText")
			</div>
		}

        <div class="search-results">
            @if (Model.TotalProductsCount > 0)
            {
                <div class="card-deck card-cols-sm-1 card-cols-md-2 card-cols-lg-3 product-grid">
                    @foreach (var product in Model.TopProducts)
                    {
                        <article class="card card-block card-shadow text-xs-center">
                            @Html.Partial("_ProductBox", product)
                        </article>
                    }
                </div>
            }

			@if (Model.TotalProductsCount > 0)
			{
				@Html.SmartStore().Pager(Model.SearchResult.Hits).Name("pagination-bottom").QueryParam("i")
			}
        </div>
    </div>
</div>